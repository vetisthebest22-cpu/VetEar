<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VetPulse - AI Veterinary Sound Analysis</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/speech-commands@0.4.0/dist/speech-commands.min.js"></script>
<style>
/* --- Ø§Ø­ØªÙØ¸Øª Ø¨ÙƒÙ„ Ø§Ù„Ù€ CSS ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ù† ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠ --- */
body { font-family: 'Inter', sans-serif; background: #fff; min-height:100vh; margin:0; }
.header{background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);padding:1rem 2rem;position:relative;z-index:10;box-shadow:0 4px 20px rgba(124,58,237,0.1);}
.nav-container{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;}
.logo{display:flex;align-items:center;gap:12px;font-size:1.5rem;font-weight:700;color:#7C3AED;}
.nav-menu{display:flex;gap:2rem;list-style:none;}
.nav-menu a{text-decoration:none;color:#4B5563;font-weight:500;transition:color 0.3s ease;}
.nav-menu a:hover{color:#7C3AED;}
.main-container{max-width:1200px;margin:0 auto;padding:3rem 2rem;position:relative;z-index:5;}
.hero-section{text-align:center;margin-bottom:3rem;}
.hero-title{font-size:3rem;font-weight:700;color:#7C3AED;margin-bottom:1rem;}
.hero-subtitle{font-size:1.2rem;color:#6B7280;margin-bottom:2rem;}
.mic-button, .stop-button {border:none;cursor:pointer;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto;}
.mic-button{width:80px;height:80px;background:linear-gradient(135deg,#7C3AED,#10B981);animation:pulse 2s ease-in-out infinite;box-shadow:0 8px 25px rgba(124,58,237,0.3);}
.stop-button{width:60px;height:60px;background:linear-gradient(135deg,#EF4444,#DC2626);box-shadow:0 6px 20px rgba(239,68,68,0.3);display:none;}
@keyframes pulse{0%,100%{box-shadow:0 8px 25px rgba(124,58,237,0.3),0 0 0 0 rgba(124,58,237,0.4);}50%{box-shadow:0 8px 25px rgba(124,58,237,0.3),0 0 0 20px rgba(124,58,237,0);}}
.progress-circle{width:80px;height:80px;border-radius:50%;background:conic-gradient(#10B981 0deg,#E5E7EB 0deg);display:flex;align-items:center;justify-content:center;position:relative;}
.progress-circle::before{content:'';position:absolute;width:60px;height:60px;background:white;border-radius:50%;}
.progress-text{position:absolute;font-weight:700;color:#7C3AED;z-index:1;}
.model-status{background:rgba(16,185,129,0.1);border:1px solid #10B981;color:#065F46;padding:0.5rem 1rem;border-radius:10px;font-size:0.9rem;margin-bottom:1rem;display:inline-block;}
.model-status.demo{background:rgba(251,191,36,0.1);border:1px solid #F59E0B;color:#92400E;}
</style>
</head>
<body>
<header class="header">
  <nav class="nav-container">
    <div class="logo">VetPulse</div>
    <ul class="nav-menu">
      <li><a href="#home">Home</a></li>
      <li><a href="#analysis">Analysis</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>
</header>

<main class="main-container">
  <section class="hero-section">
    <h1 class="hero-title">VetPulse AI Analysis</h1>
    <p class="hero-subtitle">Advanced veterinary sound analysis powered by AI</p>
    <div id="model-status" class="model-status demo">ğŸ”„ Loading AI Model...</div>
    <div class="microphone-container">
      <button class="mic-button" id="mic-button" onclick="startListening()">ğŸ¤</button>
      <button class="stop-button" id="stop-button" onclick="stopListening()">â¹ï¸</button>
    </div>
  </section>

  <div class="analysis-grid">
    <div class="progress-section">
      <div class="progress-item">
        <div class="radial-progress"><div class="progress-circle" id="noise-progress"><span class="progress-text" id="noise-text">0%</span></div></div>
        <div class="progress-info"><h3>Background Noise</h3></div>
      </div>
      <div class="progress-item">
        <div class="radial-progress"><div class="progress-circle" id="human-progress"><span class="progress-text" id="human-text">0%</span></div></div>
        <div class="progress-info"><h3>Human</h3></div>
      </div>
      <div class="progress-item">
        <div class="radial-progress"><div class="progress-circle" id="animal-progress"><span class="progress-text" id="animal-text">0%</span></div></div>
        <div class="progress-info"><h3>Small Animal</h3></div>
      </div>
      <div class="progress-item">
        <div class="radial-progress"><div class="progress-circle" id="wheeze-progress"><span class="progress-text" id="wheeze-text">0%</span></div></div>
        <div class="progress-info"><h3>Wheeze</h3></div>
      </div>
    </div>
  </div>
</main>

<script>
let isListening = false;
let recognizer = null;

// Ø¶Ø¹ Ø±Ø§Ø¨Ø· GitHub Pages Ø¨Ø¹Ø¯ Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ù‡Ù†Ø§
const URL = "https://username.github.io/repo-name/models/";

async function createModel() {
  try {
    const checkpointURL = URL + "model.json";
    const metadataURL = URL + "metadata.json";

    recognizer = speechCommands.create("BROWSER_FFT", undefined, checkpointURL, metadataURL);
    await recognizer.ensureModelLoaded();
    console.log("Model loaded!");
    return recognizer;
  } catch(e) {
    console.log("Demo mode", e);
    return null;
  }
}

async function startListening() {
  if(isListening) return;
  isListening = true;
  if(!recognizer) recognizer = await createModel();
  if(recognizer){
    recognizer.listen(result => {
      const scores = result.scores;
      // Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ·: ØªØ®ØµÙŠØµ 4 ØªØµÙ†ÙŠÙØ§Øª
      updateProgress('noise-progress', 'noise-text', Math.round(scores[0]*100));
      updateProgress('human-progress', 'human-text', Math.round(scores[1]*100));
      updateProgress('animal-progress', 'animal-text', Math.round(scores[2]*100));
      updateProgress('wheeze-progress', 'wheeze-text', Math.round(scores[3]*100));
    }, {includeSpectrogram:true, probabilityThreshold:0.1, overlapFactor:0.5});
  } else {
    simulateDemo();
  }
}

function stopListening(){
  isListening=false;
  if(recognizer) recognizer.stopListening();
}

function updateProgress(id,textId,value){
  document.getElementById(textId).textContent = value + "%";
  const degrees = value/100*360;
  document.getElementById(id).style.background=`conic-gradient(#10B981 ${degrees}deg,#E5E7EB ${degrees}deg)`;
}

// Ù…Ø­Ø§ÙƒØ§Ø© Demo
function simulateDemo(){
  let val = 0;
  const interval = setInterval(()=>{
    if(!isListening){clearInterval(interval); return;}
    val+=Math.random()*5;
    if(val>100) val=0;
    updateProgress('noise-progress','noise-text',val);
    updateProgress('human-progress','human-text',100-val);
    updateProgress('animal-progress','animal-text',val/2);
    updateProgress('wheeze-progress','wheeze-text',val/3);
  },300);
}

document.addEventListener('DOMContentLoaded', async()=>{
  const model = await createModel();
  const status=document.getElementById('model-status');
  if(model){recognizer=model; status.textContent="ğŸ¤– AI Model Ready"; status.className="model-status";}
  else{status.textContent="âš ï¸ Demo Mode - Update model path"; status.className="model-status demo";}
});
</script>
</body>
</html>
