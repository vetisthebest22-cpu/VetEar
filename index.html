<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VetPulse - AI Veterinary Sound Analysis</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* جميع الـ CSS الموجود سابقاً يبقى كما هو */
/* لا تغييرات */
</style>
</head>
<body>
<!-- كل HTML السابق يبقى كما هو -->

<script>
let isListening = false;
let mediaRecorder;
let audioChunks = [];

function toggleListening() {
    const button = document.querySelector('.mic-button');
    isListening = !isListening;
    if (isListening) {
        button.style.animation = 'pulse 0.5s ease-in-out infinite';
        button.style.background = 'linear-gradient(135deg, #10B981, #7C3AED)';
        startRecording();
    } else {
        button.style.animation = 'pulse 2s ease-in-out infinite';
        button.style.background = 'linear-gradient(135deg, #7C3AED, #10B981)';
        stopRecording();
    }
}

function startRecording() {
    navigator.mediaDevices.getUserMedia({ audio: true })
    .then(stream => {
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.start();
        audioChunks = [];

        mediaRecorder.addEventListener('dataavailable', event => {
            audioChunks.push(event.data);
        });

        mediaRecorder.addEventListener('stop', () => {
            const audioBlob = new Blob(audioChunks);
            simulateAnalysis(); // هنا يمكن استبدالها بتحليل AI حقيقي لاحقاً
        });
    });
}

function stopRecording() {
    if (mediaRecorder && mediaRecorder.state !== 'inactive') {
        mediaRecorder.stop();
    }
}

function updateProgress(elementId, textId, percentage) {
    const circle = document.getElementById(elementId);
    const text = document.getElementById(textId);
    const degrees = (percentage / 100) * 360;
    circle.style.background = `conic-gradient(#10B981 ${degrees}deg, #E5E7EB ${degrees}deg)`;
    text.textContent = `${percentage}%`;
}

function simulateAnalysis() {
    const scenarios = [
        { noise: 12, human: 18, animal: 92, wheeze: 3, recommendation: "Excellent! Healthy small animal." },
        { noise: 25, human: 45, animal: 35, wheeze: 15, recommendation: "Mixed signals detected." },
        { noise: 8, human: 12, animal: 25, wheeze: 78, recommendation: "⚠️ Significant wheezing detected!" }
    ];

    const scenario = scenarios[Math.floor(Math.random() * scenarios.length)];

    updateProgress('noise-progress', 'noise-text', scenario.noise);
    updateProgress('human-progress', 'human-text', scenario.human);
    updateProgress('animal-progress', 'animal-text', scenario.animal);
    updateProgress('wheeze-progress', 'wheeze-text', scenario.wheeze);

    document.getElementById('recommendation-text').textContent = scenario.recommendation;

    // عرض نافذة alert مع النتيجة
    setTimeout(() => {
        alert(`AI Analysis Result:\nBackground Noise: ${scenario.noise}%\nHuman: ${scenario.human}%\nAnimal: ${scenario.animal}%\nWheezing: ${scenario.wheeze}%\nRecommendation: ${scenario.recommendation}`);
        isListening = false;
        const button = document.querySelector('.mic-button');
        button.style.animation = 'pulse 2s ease-in-out infinite';
        button.style.background = 'linear-gradient(135deg, #7C3AED, #10B981)';
    }, 500);
}

// initialize default progress
document.addEventListener('DOMContentLoaded', function() {
    updateProgress('noise-progress', 'noise-text', 15);
    updateProgress('human-progress', 'human-text', 25);
    updateProgress('animal-progress', 'animal-text', 85);
    updateProgress('wheeze-progress', 'wheeze-text', 8);
});
</script>
</body>
</html>



